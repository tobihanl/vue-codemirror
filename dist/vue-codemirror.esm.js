/*!
* VueCodemirror v6.1.1
* Copyright (c) Surmon. All rights reserved.
* Released under the MIT License.
* Surmon
*/
import{inject as e,defineComponent as t,shallowRef as n,computed as o,toRaw as r,onMounted as u,watch as a,onBeforeUnmount as i,h as c}from"vue";import{EditorState as s,Compartment as l,StateEffect as f}from"@codemirror/state";import{EditorView as d,keymap as m,placeholder as p}from"@codemirror/view";import{indentWithTab as v}from"@codemirror/commands";import{indentUnit as g}from"@codemirror/language";var b=Object.freeze({autofocus:!1,disabled:!1,indentWithTab:!0,tabSize:2,placeholder:"",autoDestroy:!0,extensions:[]}),h=Symbol("vue-codemirror-global-config");var y,O=function(e){var t=e.onUpdate,n=e.onChange,o=e.onFocus,r=e.onBlur,u=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n}(e,["onUpdate","onChange","onFocus","onBlur"]);return s.create({doc:u.doc,selection:u.selection,extensions:(Array.isArray(u.extensions)?u.extensions:[u.extensions]).concat([d.updateListener.of((function(e){t(e),e.docChanged&&n(e.state.doc.toString(),e),e.focusChanged&&(e.view.hasFocus?o(e):r(e))}))])})},j=function(e){var t=new l;return{compartment:t,run:function(n){t.get(e.state)?e.dispatch({effects:t.reconfigure(n)}):e.dispatch({effects:f.appendConfig.of(t.of(n))})}}},S=function(e,t){var n=j(e),o=n.compartment,r=n.run;return function(n){var u=o.get(e.state);r((null!=n?n:u!==t)?t:[])}},x={type:Boolean,default:void 0},C={autofocus:x,disabled:x,indentWithTab:x,tabSize:Number,placeholder:String,style:Object,autoDestroy:x,phrases:Object,root:Object,extensions:Array,selection:Object},D={modelValue:{type:String,default:""}},U=Object.assign(Object.assign({},C),D);!function(e){e.Change="change",e.Update="update",e.Focus="focus",e.Blur="blur",e.Ready="ready",e.ModelUpdate="update:modelValue"}(y||(y={}));var w={};w[y.Change]=function(e,t){return!0},w[y.Update]=function(e){return!0},w[y.Focus]=function(e){return!0},w[y.Blur]=function(e){return!0},w[y.Ready]=function(e){return!0};var z={};z[y.ModelUpdate]=w[y.Change];var B=Object.assign(Object.assign({},w),z),F=t({name:"VueCodemirror",props:Object.assign({},U),emits:Object.assign({},B),setup:function(t,l){var f=n(),x=n(),C=n(),D=Object.assign(Object.assign({},b),e(h,{})),U=o((function(){var e={};return Object.keys(r(t)).forEach((function(n){var o;"modelValue"!==n&&(e[n]=null!==(o=t[n])&&void 0!==o?o:D[n])})),e}));return u((function(){var e;x.value=O({doc:t.modelValue,selection:U.value.selection,extensions:null!==(e=D.extensions)&&void 0!==e?e:[],onFocus:function(e){return l.emit(y.Focus,e)},onBlur:function(e){return l.emit(y.Blur,e)},onUpdate:function(e){return l.emit(y.Update,e)},onChange:function(e,n){e!==t.modelValue&&(l.emit(y.Change,e,n),l.emit(y.ModelUpdate,e,n))}}),C.value=function(e){return new d(Object.assign({},e))}({state:x.value,parent:f.value,root:U.value.root});var n=function(e){var t=function(){return e.state.doc.toString()},n=j(e).run,o=S(e,[d.editable.of(!1),s.readOnly.of(!0)]),r=S(e,m.of([v])),u=j(e).run,a=j(e).run,i=j(e).run,c=j(e).run;return{focus:function(){return e.focus()},getDoc:t,setDoc:function(n){n!==t()&&e.dispatch({changes:{from:0,to:e.state.doc.length,insert:n}})},reExtensions:n,toggleDisabled:o,toggleIndentWithTab:r,setTabSize:function(e){u([s.tabSize.of(e),g.of(" ".repeat(e))])},setPhrases:function(e){a([s.phrases.of(e)])},setPlaceholder:function(e){i(p(e))},setStyle:function(e){void 0===e&&(e={}),c(d.theme({"&":Object.assign({},e)}))}}}(C.value);a((function(){return t.modelValue}),(function(e){e!==n.getDoc()&&n.setDoc(e)})),a((function(){return t.extensions}),(function(e){return n.reExtensions(e||[])}),{immediate:!0}),a((function(){return U.value.disabled}),(function(e){return n.toggleDisabled(e)}),{immediate:!0}),a((function(){return U.value.indentWithTab}),(function(e){return n.toggleIndentWithTab(e)}),{immediate:!0}),a((function(){return U.value.tabSize}),(function(e){return n.setTabSize(e)}),{immediate:!0}),a((function(){return U.value.phrases}),(function(e){return n.setPhrases(e||{})}),{immediate:!0}),a((function(){return U.value.placeholder}),(function(e){return n.setPlaceholder(e)}),{immediate:!0}),a((function(){return U.value.style}),(function(e){return n.setStyle(e)}),{immediate:!0}),U.value.autofocus&&n.focus(),l.emit(y.Ready,{state:x.value,view:C.value,container:f.value})})),i((function(){U.value.autoDestroy&&C.value&&function(e){e.destroy()}(C.value)})),function(){return c("div",{class:"v-codemirror",style:{display:"contents"},ref:f})}}}),P=F,T=function(e,t){e.component(F.name,F),e.component("Codemirror",F),function(e,t){e.provide(h,t)}(e,t)},V={Codemirror:P,install:T};export{P as Codemirror,b as DEFAULT_CONFIG,V as default,T as install};
//# sourceMappingURL=vue-codemirror.esm.js.map
