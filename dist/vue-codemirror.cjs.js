/*!
* VueCodemirror v6.1.1
* Copyright (c) Surmon. All rights reserved.
* Released under the MIT License.
* Surmon
*/
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("vue"),t=require("@codemirror/state"),n=require("@codemirror/view"),o=require("@codemirror/commands"),r=require("@codemirror/language"),a=Object.freeze({autofocus:!1,disabled:!1,indentWithTab:!0,tabSize:2,placeholder:"",autoDestroy:!0,extensions:[]}),i=Symbol("vue-codemirror-global-config");var u,c=function(e){var o=e.onUpdate,r=e.onChange,a=e.onFocus,i=e.onBlur,u=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n}(e,["onUpdate","onChange","onFocus","onBlur"]);return t.EditorState.create({doc:u.doc,selection:u.selection,extensions:(Array.isArray(u.extensions)?u.extensions:[u.extensions]).concat([n.EditorView.updateListener.of((function(e){o(e),e.docChanged&&r(e.state.doc.toString(),e),e.focusChanged&&(e.view.hasFocus?a(e):i(e))}))])})},s=function(e){return new n.EditorView(Object.assign({},e))},l=function(e){var n=new t.Compartment;return{compartment:n,run:function(o){n.get(e.state)?e.dispatch({effects:n.reconfigure(o)}):e.dispatch({effects:t.StateEffect.appendConfig.of(n.of(o))})}}},d=function(e,t){var n=l(e),o=n.compartment,r=n.run;return function(n){var a=o.get(e.state);r((null!=n?n:a!==t)?t:[])}},f=function(e){var a=function(){return e.state.doc.toString()},i=l(e).run,u=d(e,[n.EditorView.editable.of(!1),t.EditorState.readOnly.of(!0)]),c=d(e,n.keymap.of([o.indentWithTab])),s=l(e).run,f=l(e).run,m=l(e).run,p=l(e).run;return{focus:function(){return e.focus()},getDoc:a,setDoc:function(t){t!==a()&&e.dispatch({changes:{from:0,to:e.state.doc.length,insert:t}})},reExtensions:i,toggleDisabled:u,toggleIndentWithTab:c,setTabSize:function(e){s([t.EditorState.tabSize.of(e),r.indentUnit.of(" ".repeat(e))])},setPhrases:function(e){f([t.EditorState.phrases.of(e)])},setPlaceholder:function(e){m(n.placeholder(e))},setStyle:function(e){void 0===e&&(e={}),p(n.EditorView.theme({"&":Object.assign({},e)}))}}},m={type:Boolean,default:void 0},p={autofocus:m,disabled:m,indentWithTab:m,tabSize:Number,placeholder:String,style:Object,autoDestroy:m,phrases:Object,root:Object,extensions:Array,selection:Object},v={modelValue:{type:String,default:""}},h=Object.assign(Object.assign({},p),v);!function(e){e.Change="change",e.Update="update",e.Focus="focus",e.Blur="blur",e.Ready="ready",e.ModelUpdate="update:modelValue"}(u||(u={}));var g={};g[u.Change]=function(e,t){return!0},g[u.Update]=function(e){return!0},g[u.Focus]=function(e){return!0},g[u.Blur]=function(e){return!0},g[u.Ready]=function(e){return!0};var b={};b[u.ModelUpdate]=g[u.Change];var y=Object.assign(Object.assign({},g),b),O=e.defineComponent({name:"VueCodemirror",props:Object.assign({},h),emits:Object.assign({},y),setup:function(t,n){var o=e.shallowRef(),r=e.shallowRef(),l=e.shallowRef(),d=Object.assign(Object.assign({},a),e.inject(i,{})),m=e.computed((function(){var n={};return Object.keys(e.toRaw(t)).forEach((function(e){var o;"modelValue"!==e&&(n[e]=null!==(o=t[e])&&void 0!==o?o:d[e])})),n}));return e.onMounted((function(){var a;r.value=c({doc:t.modelValue,selection:m.value.selection,extensions:null!==(a=d.extensions)&&void 0!==a?a:[],onFocus:function(e){return n.emit(u.Focus,e)},onBlur:function(e){return n.emit(u.Blur,e)},onUpdate:function(e){return n.emit(u.Update,e)},onChange:function(e,o){e!==t.modelValue&&(n.emit(u.Change,e,o),n.emit(u.ModelUpdate,e,o))}}),l.value=s({state:r.value,parent:o.value,root:m.value.root});var i=f(l.value);e.watch((function(){return t.modelValue}),(function(e){e!==i.getDoc()&&i.setDoc(e)})),e.watch((function(){return t.extensions}),(function(e){return i.reExtensions(e||[])}),{immediate:!0}),e.watch((function(){return m.value.disabled}),(function(e){return i.toggleDisabled(e)}),{immediate:!0}),e.watch((function(){return m.value.indentWithTab}),(function(e){return i.toggleIndentWithTab(e)}),{immediate:!0}),e.watch((function(){return m.value.tabSize}),(function(e){return i.setTabSize(e)}),{immediate:!0}),e.watch((function(){return m.value.phrases}),(function(e){return i.setPhrases(e||{})}),{immediate:!0}),e.watch((function(){return m.value.placeholder}),(function(e){return i.setPlaceholder(e)}),{immediate:!0}),e.watch((function(){return m.value.style}),(function(e){return i.setStyle(e)}),{immediate:!0}),m.value.autofocus&&i.focus(),n.emit(u.Ready,{state:r.value,view:l.value,container:o.value})})),e.onBeforeUnmount((function(){m.value.autoDestroy&&l.value&&function(e){e.destroy()}(l.value)})),function(){return e.h("div",{class:"v-codemirror",style:{display:"contents"},ref:o})}}}),w=O,j=function(e,t){e.component(O.name,O),e.component("Codemirror",O),function(e,t){e.provide(i,t)}(e,t)},S={Codemirror:w,install:j};exports.Codemirror=w,exports.DEFAULT_CONFIG=a,exports.default=S,exports.install=j;//# sourceMappingURL=vue-codemirror.cjs.js.map
